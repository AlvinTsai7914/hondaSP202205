<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <!-- IE -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 取消 safari 電話連結 -->
    <meta name="format-detection" content="telephone=no">
    
    <!-- facebook share -->
    <meta property="og:url"           content="https://www.ks-design.com.tw/" />
    <meta property="og:type"          content="website" />
    <meta property="og:title"         content="Your Website Title" />
    <meta property="og:description"   content="Your description" />
    <meta property="og:image"         content="https://www.your-domain.com/path/image.jpg" />
    
    <title>好車停不停 | 遊戲頁</title>
    <!-- favicon -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/site.webmanifest"> -->

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" /> -->
    <link rel="stylesheet" type="text/css" media="all" href="css/croppie.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" media="all" href="css/style.css" />
    

    </head>

<body>
    <div id="fb-root"></div>
    <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <!-- wrapper start -->
    <div class="wrapper" id="capture">
        <!-- header start -->
        <header>
            <a href="https://www.honda-taiwan.com.tw/Auto" class="logo" target="_blank">
                <img src="img/header-logo.png" alt="">
            </a>
        </header>
        <!-- header end -->
        <!-- 主要內容 start -->
        <main class="page_bingo" style="padding-top: 60px;">
            
            <div class="banner">
                <img src="img/bingo_banner.png" alt="" style="width: 100%">
            </div>

            <div class="container">
                <!-- 九宮格table START -->
                <div class="bingo">
                    <!-- 畫線 -->
                    <div class="bingo_line_box vertical_fst active">
                        <div class="bingo_line"></div>
                    </div>

                    <!-- 九宮格格子 START -->
                    <div class="row no-gutters bingo_table">
                        <div class="col-4 bingo_table__item" data-number="1">
                            <div class="num" >
                                <div>1</div>
                            </div>
                            <div class="img_box">
                                <div>1</div>
                                <img src="https://fakeimg.pl/300/">
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item" data-number="2">
                            <div class="num" >
                                <div>2</div>
                            </div>
                            <div class="img_box">
                                <div>2</div>
                                <img src="https://fakeimg.pl/300/">
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item" data-number="3">
                            <div class="num" >
                                <div>3</div>
                            </div>

                            <div class="img_box">
                                <div>3</div>
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item"  data-number="4">
                            <div class="num">
                                <div>4</div>
                            </div>
                            <div class="img_box">
                                <div>4</div>
                                <img src="https://fakeimg.pl/300/">
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item"  data-number="5">
                            <div class="num">
                                <div>5</div>
                            </div>
                            <div class="img_box">
                                <div>5</div>
                                <img src="https://fakeimg.pl/300/">
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item"  data-number="6">
                            <div class="num">
                                <div>6</div>
                            </div>
                            <div class="img_box">
                                <div>6</div>
                                <img src="https://fakeimg.pl/300/"  >
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item" data-number="7">
                            <div class="num">
                                <div>7</div>
                            </div>
                            <div class="img_box">
                                <div>7</div>
                                <img src="https://fakeimg.pl/300/">
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item" data-number="8">
                            <div class="num">
                                <div>8</div>
                            </div>
                            <div class="img_box">
                                <div>8</div>
                            </div>
                        </div>
                        <div class="col-4 bingo_table__item" data-number="9">
                            <div class="num">
                                <div>9</div>
                            </div>
                            <div class="img_box">
                                <div>9</div>
                            </div>
                        </div>
                    </div>
                     <!-- 九宮格格子 END -->
                </div>
                <!-- 九宮格table END -->

                <!-- 解說文字 -->
                <div class="rules d-none">
                    <h2>你今天停在幾號停車格呢?</h2>
                    <p>只要其中包含1-9的數字<br>
                        就趕快拍下愛車與停車格的合照<br>
                        解鎖上方的九宮格吧</p>
                    <div class="steps">
                        <div class="step_one">
                            點選上方要解鎖的那格數字，即可上傳照片
                        </div>
                        <div class="step_two">
                            將解鎖的數字格連成一線就能順利破關！
                            只要把戰績分享給好朋友們，
                            就能領取1hr停車券的破關獎勵唷！
                        </div>
                    </div>
                </div>

                 <!-- 上傳成功 -->
                <div class="result succeed">
                    <h2><span><i class="fa-solid fa-check"></i></span>成功解鎖！</h2>
                    <p>GO！GO！GO！<br>
                        距離連成一線不遠囉<br>
                        請繼續收集其他號碼</p>
                </div>

                <!-- 上傳失敗 -->
                <div class="result fail">
                    <h2><span><i class="fa-solid fa-xmark"></i></span>Oops 辨識失敗！</h2>
                    <p>Oops 辨識失敗！<br>
                        請再上傳一次高清照</p>
                </div>

                <!-- 完成遊戲 -->
                <div class="result complete active">
                    <h2>挑戰成功！</h2>
                    <p>完成Honda停車九宮格的你是最棒的！<br>
                        趕快向好友分享就可以獲得<br>
                        全台嘟嘟房 1hr 停車券哦！</p>
                        <div class="share_links">
                            <div class="download" href="">
                            </div>
                            <a class="line" href="https://social-plugins.line.me/lineit/share?url=">
                            </a>
                            <div class="facebook">
                                <img src="img/icon/facebook.png" alt="">
                            </div>
                        </div>
                </div>
            </div>

            <!-- 上傳照片 START -->
            <div class="upload">
                <div class="container">
                    <p>你已選取<span class="selected_number">9</span>號</p>
                    <label class="btn select"><input id="upload_img" style="display:none;" type="file"
                            accept="image/*"></label>

                    <div id="oldImg" style="display:none;"></div>

                    <button id="crop_img" class="btn submit"></button>

                    <div id="newImgInfo"></div>
                    <div id="newImg"></div>
                    <img src="https://fakeimg.pl/300/">
                </div>
            </div>
            <!-- 上傳照片 END -->
        </main>
        <!-- 主要內容 end -->
    </div>
    <!-- wrapper end -->



    <!-- jquery -->
    <script src="js/jquery-3.6.0.min.js"></script>
    <!-- bootstrap -->
    <script src="js/bootstrap-4.6.1.min.js"></script>
    <!-- croppie 上傳圖片套件 -->
    <script src="js/croppie.js"></script>
    <script src="js/upload-image.js"></script>
    <!-- line share -->
    <script src="https://www.line-website.com/social-plugins/js/thirdparty/loader.min.js" async="async" defer="defer"></script>
    <!-- 共用js -->
    <script src="js/common.js"></script>
    <script>
        $(function () {
            // 讀取後，依序掀開卡片
            n = 0
            $(".bingo_table__item").each(function () {
                if ($(this).has("img").length) {
                    setTimeout(() => {
                        $(this).addClass("active")
                    }, n)
                    n = n + 200
                }
            })

            // 點卡片啟動上傳區塊
            $(".bingo_table__item").on("click", function () {
                if(!$(this).hasClass("active")) {
                    var selected_number = $(this).data('number')
                    console.log(selected_number)
                    $(".selected_number").text(selected_number)
                    $(".upload").addClass("active")
                }
     
            })

            // 臉書分享功能
            $(".share_links .facebook").on("click", function() {
                console.log("click")
                FB.ui({
                    method: 'share',
                    href: 'https://www.ks-design.com.tw/',
                }, function(response){});
            })
        })
    </script>
    <!-- <script>
        $(function() {
            var width_crop = 320, // 圖片裁切寬度 px 值
                height_crop = 320, // 圖片裁切高度 px 值
                type_crop = "square", // 裁切形狀: square 為方形, circle 為圓形
                width_preview = 320, // 預覽區塊寬度 px 值
                height_preview = 320, // 預覽區塊高度 px 值
                compress_ratio = 0.85, // 圖片壓縮比例 0~1
                type_img = "jpeg", // 圖檔格式 jpeg png webp
                oldImg = new Image(),
                myCrop, file, oldImgDataUrl;

            // 裁切初始參數設定
            myCrop = $("#oldImg").croppie({
                viewport: { // 裁切區塊
                    width: width_crop,
                    height: height_crop,
                    type: type_crop
                },
                boundary: { // 預覽區塊
                    width: width_preview,
                    height: height_preview
                }
            });

            function readFile(input) {
                if (input.files && input.files[0]) {
                    file = input.files[0];
                } else {
                    alert("瀏覽器不支援此功能！建議使用最新版本 Chrome");
                    return;
                }

                if (file.type.indexOf("image") == 0) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        oldImgDataUrl = e.target.result;
                        oldImg.src = oldImgDataUrl; // 載入 oldImg 取得圖片資訊
                        myCrop.croppie("bind", {
                            url: oldImgDataUrl
                        });
                    };

                    reader.readAsDataURL(file);
                } else {
                    alert("您上傳的不是圖檔！");
                }
            }
            
            // function displayCropImg(src) {
            //     var html = "<img src='" + src + "' />";
            //     $("#newImg").html(html);
            // }

            $("#upload_img").on("change", function () {
                // $("#oldImg").show();
                readFile(this);
            });

            oldImg.onload = function () {
                myCrop.croppie("result", {
                    type: "canvas",
                    format: type_img,
                    quality: compress_ratio
                }).then(function (blob) {
                    // $(".upload").removeClass("active")
                    // $(".rules").addClass("d-none")
                    // $(".result.succeed").addClass("active")
                    var formData = new FormData();
                    formData.append('filename', $("#upload_img")[0].files[0]);
                    // formData.append('blob', blob);
                    $.ajax({
                        type: 'POST',
                        url: myAppUrlSettings.MyUsefulUrl,
                        complete:function(){
                            console.log("complete")
                        },
                        error: function(){
                            console.log("error")
                        }
                    }).done(function(res) {
                        var user = res.tab_user;
                        
                        setTimeout(function(){
                            if (user.length) {
                                $.each(user, function(index, data) {
                                    buildContactCard(data);
                                });
                            }
                        },500);
                        

                        page++;
                        $wrap.attr('data-page', page);
                    

                        if(res.hasMore == false){
                            $(window).off("scroll",scrollTpBottom);
                        }else{
                            $(window).on('scroll', scrollTpBottom);
                        }
                    });
                });
            };

            // myCrop.croppie('result', 'blob').then(function (blob) {
            //     var formData = new FormData();

            //     formData.append('filename', 'FileName.png');
            //     formData.append('blob', blob);
            //     var myAppUrlSettings =
            //     {
            //         MyUsefulUrl: '@Url.Action("CustomCrop", "Demo")'
            //     }
            //     $.ajax({
            //         type: 'POST',
            //         url: myAppUrlSettings.MyUsefulUrl,
            //         complete:function(){
            //             console.log("complete")
            //         },
            //         error: function(){
            //             console.log("error")
            //         }
            //     }).done(function(res) {
            //         var user = res.tab_user;
                    
            //         setTimeout(function(){
            //             if (user.length) {
            //                 $.each(user, function(index, data) {
            //                     buildContactCard(data);
            //                 });
            //             }
            //         },500);
                    

            //         page++;
            //         $wrap.attr('data-page', page);
                   

            //         if(res.hasMore == false){
            //             $(window).off("scroll",scrollTpBottom);
            //         }else{
            //             $(window).on('scroll', scrollTpBottom);
            //         }
            //     });
            // });

        })
         
    </script> -->
</body>

</html>